<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Szövegösszehasonlítás | Szövegbányászat és mesterséges intelligencia R-ben</title>
  <meta name="description" content="Jelen kötet a Kvantitatív szövegelemzés és szövegbányászat a politikatudományban (L’Harmattan, 2016) című könyv folytatásaként és egyben kiegészítéseként a szövegbányászat és a mesterséges intelligencia társadalomtudományi alkalmazásának gyakorlatába nyújt bevezetést." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Szövegösszehasonlítás | Szövegbányászat és mesterséges intelligencia R-ben" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="index_logo.jpg" />
  <meta property="og:description" content="Jelen kötet a Kvantitatív szövegelemzés és szövegbányászat a politikatudományban (L’Harmattan, 2016) című könyv folytatásaként és egyben kiegészítéseként a szövegbányászat és a mesterséges intelligencia társadalomtudományi alkalmazásának gyakorlatába nyújt bevezetést." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Szövegösszehasonlítás | Szövegbányászat és mesterséges intelligencia R-ben" />
  
  <meta name="twitter:description" content="Jelen kötet a Kvantitatív szövegelemzés és szövegbányászat a politikatudományban (L’Harmattan, 2016) című könyv folytatásaként és egyben kiegészítéseként a szövegbányászat és a mesterséges intelligencia társadalomtudományi alkalmazásának gyakorlatába nyújt bevezetést." />
  <meta name="twitter:image" content="index_logo.jpg" />

<meta name="author" content="Sebők Miklós, Ring Orsolya, Máté Ákos" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html"/>
<link rel="next" href="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html"/>
<script src="libs/header-attrs-2.7.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Üdvözöljük!</a></li>
<li class="chapter" data-level="1" data-path="bevezetés.html"><a href="bevezetés.html"><i class="fa fa-check"></i><b>1</b> Bevezetés</a>
<ul>
<li class="chapter" data-level="1.1" data-path="bevezetés.html"><a href="bevezetés.html#a-kötet-céljai-és-főbb-témái"><i class="fa fa-check"></i><b>1.1</b> A kötet céljai és főbb témái</a></li>
<li class="chapter" data-level="1.2" data-path="bevezetés.html"><a href="bevezetés.html#a-kötet-témái-és-alkalmazási-lehetőségei"><i class="fa fa-check"></i><b>1.2</b> A kötet témái és alkalmazási lehetőségei</a></li>
<li class="chapter" data-level="1.3" data-path="bevezetés.html"><a href="bevezetés.html#használati-utasítás"><i class="fa fa-check"></i><b>1.3</b> Használati utasítás</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="bevezetés.html"><a href="bevezetés.html#hunminer-telepítése-és-használata"><i class="fa fa-check"></i><b>1.3.1</b> HunMineR telepítése és használata</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="bevezetés.html"><a href="bevezetés.html#köszönetnyilvánítás"><i class="fa fa-check"></i><b>1.4</b> Köszönetnyilvánítás</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="alapfogalmak.html"><a href="alapfogalmak.html"><i class="fa fa-check"></i><b>2</b> Alapfogalmak</a>
<ul>
<li class="chapter" data-level="2.1" data-path="alapfogalmak.html"><a href="alapfogalmak.html#elméleti-alapok"><i class="fa fa-check"></i><b>2.1</b> Elméleti alapok</a></li>
<li class="chapter" data-level="2.2" data-path="alapfogalmak.html"><a href="alapfogalmak.html#fogalmi-alapok"><i class="fa fa-check"></i><b>2.2</b> Fogalmi alapok</a></li>
<li class="chapter" data-level="2.3" data-path="alapfogalmak.html"><a href="alapfogalmak.html#a-szövegbányászat-alapelvei"><i class="fa fa-check"></i><b>2.3</b> A szövegbányászat alapelvei</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html"><i class="fa fa-check"></i><b>3</b> Az adatkezelés R-ben</a>
<ul>
<li class="chapter" data-level="3.1" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#adatok-importálása-és-exportálása"><i class="fa fa-check"></i><b>3.1</b> Adatok importálása és exportálása</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#szöveges-dokumentumok-importálása"><i class="fa fa-check"></i><b>3.1.1</b> Szöveges dokumentumok importálása</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#adatok-exportálása"><i class="fa fa-check"></i><b>3.2</b> Adatok exportálása</a></li>
<li class="chapter" data-level="3.3" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#a-pipe-operátor"><i class="fa fa-check"></i><b>3.3</b> A pipe operátor</a></li>
<li class="chapter" data-level="3.4" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#műveletek-a-data-framekkel"><i class="fa fa-check"></i><b>3.4</b> Műveletek a data framekkel</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#megfigyelések-szűrése-filter"><i class="fa fa-check"></i><b>3.4.1</b> Megfigyelések szűrése: <code>filter()</code></a></li>
<li class="chapter" data-level="3.4.2" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#változók-kiválogatása-select"><i class="fa fa-check"></i><b>3.4.2</b> Változók kiválogatása: <code>select()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#új-változók-létrehozása-mutate"><i class="fa fa-check"></i><b>3.4.3</b> Új változók létrehozása: <code>mutate()</code></a></li>
<li class="chapter" data-level="3.4.4" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#csoportonkénti-statisztikák-group_by-és-summarize"><i class="fa fa-check"></i><b>3.4.4</b> Csoportonkénti statisztikák: <code>group_by()</code> és <code>summarize()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="az-adatkezelés-r-ben.html"><a href="az-adatkezelés-r-ben.html#munka-karakter-vektorokkaladatkezeles-5"><i class="fa fa-check"></i><b>3.5</b> Munka karakter vektorokkal</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="korpuszépítés-és-szövegel-készítés.html"><a href="korpuszépítés-és-szövegel-készítés.html"><i class="fa fa-check"></i><b>4</b> Korpuszépítés és szövegelőkészítés</a>
<ul>
<li class="chapter" data-level="4.1" data-path="korpuszépítés-és-szövegel-készítés.html"><a href="korpuszépítés-és-szövegel-készítés.html#szövegbeszerzés"><i class="fa fa-check"></i><b>4.1</b> Szövegbeszerzés</a></li>
<li class="chapter" data-level="4.2" data-path="korpuszépítés-és-szövegel-készítés.html"><a href="korpuszépítés-és-szövegel-készítés.html#szövegelőkészítés"><i class="fa fa-check"></i><b>4.2</b> Szövegelőkészítés</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="korpuszépítés-és-szövegel-készítés.html"><a href="korpuszépítés-és-szövegel-készítés.html#string-műveletek"><i class="fa fa-check"></i><b>4.2.1</b> String műveletek</a></li>
<li class="chapter" data-level="4.2.2" data-path="korpuszépítés-és-szövegel-készítés.html"><a href="korpuszépítés-és-szövegel-készítés.html#tokenizálás-szótövezés-kisbetűsítés-és-a-stopszavak-eltávolítása"><i class="fa fa-check"></i><b>4.2.2</b> Tokenizálás, szótövezés, kisbetűsítés és a stopszavak eltávolítása</a></li>
<li class="chapter" data-level="4.2.3" data-path="korpuszépítés-és-szövegel-készítés.html"><a href="korpuszépítés-és-szövegel-készítés.html#dokumentum-kifejezés-mátrix-dtm"><i class="fa fa-check"></i><b>4.2.3</b> Dokumentum kifejezés mátrix (DTM)</a></li>
<li class="chapter" data-level="4.2.4" data-path="korpuszépítés-és-szövegel-készítés.html"><a href="korpuszépítés-és-szövegel-készítés.html#súlyozás"><i class="fa fa-check"></i><b>4.2.4</b> Súlyozás</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="leiro-stat.html"><a href="leiro-stat.html"><i class="fa fa-check"></i><b>5</b> Információ-visszakeresés és információkinyerés, szövegek reprezentálása a vektortérben, leíró statisztika</a>
<ul>
<li class="chapter" data-level="5.1" data-path="leiro-stat.html"><a href="leiro-stat.html#a-szövegek-reprezentálása-a-vektortérben---szózsák-modell"><i class="fa fa-check"></i><b>5.1</b> A szövegek reprezentálása a vektortérben - szózsák modell</a></li>
<li class="chapter" data-level="5.2" data-path="leiro-stat.html"><a href="leiro-stat.html#leíró-statisztika"><i class="fa fa-check"></i><b>5.2</b> Leíró statisztika</a></li>
<li class="chapter" data-level="5.3" data-path="leiro-stat.html"><a href="leiro-stat.html#a-szövegek-lexikai-diverzitása"><i class="fa fa-check"></i><b>5.3</b> A szövegek lexikai diverzitása</a></li>
<li class="chapter" data-level="5.4" data-path="leiro-stat.html"><a href="leiro-stat.html#összehasonlításleiro_stat-4"><i class="fa fa-check"></i><b>5.4</b> Összehasonlítás</a></li>
<li class="chapter" data-level="5.5" data-path="leiro-stat.html"><a href="leiro-stat.html#kifejezések-kontextusba-helyezése"><i class="fa fa-check"></i><b>5.5</b> Kifejezések kontextusba helyezése</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="szótáralapú-elemzések-érzelem-elemzés.html"><a href="szótáralapú-elemzések-érzelem-elemzés.html"><i class="fa fa-check"></i><b>6</b> Szótáralapú elemzések, érzelem-elemzés</a>
<ul>
<li class="chapter" data-level="6.1" data-path="szótáralapú-elemzések-érzelem-elemzés.html"><a href="szótáralapú-elemzések-érzelem-elemzés.html#szótárak-az-r-ben"><i class="fa fa-check"></i><b>6.1</b> Szótárak az R-ben</a></li>
<li class="chapter" data-level="6.2" data-path="szótáralapú-elemzések-érzelem-elemzés.html"><a href="szótáralapú-elemzések-érzelem-elemzés.html#magyar-nemzet-cikkek"><i class="fa fa-check"></i><b>6.2</b> Magyar Nemzet cikkek</a></li>
<li class="chapter" data-level="6.3" data-path="szótáralapú-elemzések-érzelem-elemzés.html"><a href="szótáralapú-elemzések-érzelem-elemzés.html#mnb-sajtóközlemények"><i class="fa fa-check"></i><b>6.3</b> MNB sajtóközlemények</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html"><a href="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html"><i class="fa fa-check"></i><b>7</b> Felügyelet nélküli tanulás: Topik modellezés magyar törvényszövegeken</a>
<ul>
<li class="chapter" data-level="7.1" data-path="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html"><a href="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html#k-közép-klaszterezés-kvalitatív-adatokkal"><i class="fa fa-check"></i><b>7.1</b> K közép klaszterezés kvalitatív adatokkal</a></li>
<li class="chapter" data-level="7.2" data-path="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html"><a href="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html#látens-dirichlet-allokáció-topik-modelleklda-1"><i class="fa fa-check"></i><b>7.2</b> Látens Dirichlet Allokáció topik modellek</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html"><a href="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html#a-vem-módszer-alkalmazása-a-magyar-törvények-korpuszán"><i class="fa fa-check"></i><b>7.2.1</b> A „VEM" módszer alkalmazása a magyar törvények korpuszán</a></li>
<li class="chapter" data-level="7.2.2" data-path="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html"><a href="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html#az-lda-gibbs-módszer-alkalmazása-a-magyar-törvények-korpuszán"><i class="fa fa-check"></i><b>7.2.2</b> Az „LDA Gibbs" módszer alkalmazása a magyar törvények korpuszán</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html"><a href="felügyelet-nélküli-tanulás-topik-modellezés-magyar-törvényszövegeken.html#struktúrális-topik-modellek"><i class="fa fa-check"></i><b>7.3</b> Struktúrális topik modellek</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="szóbeágyazások.html"><a href="szóbeágyazások.html"><i class="fa fa-check"></i><b>8</b> Szóbeágyazások</a>
<ul>
<li class="chapter" data-level="8.1" data-path="szóbeágyazások.html"><a href="szóbeágyazások.html#word2vec-glove-és-fasttext"><i class="fa fa-check"></i><b>8.1</b> Word2Vec, GloVe és fastText</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="szóbeágyazások.html"><a href="szóbeágyazások.html#glove-használata-magyar-média-korpuszon"><i class="fa fa-check"></i><b>8.1.1</b> GloVe használata magyar média korpuszon</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html"><a href="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html"><i class="fa fa-check"></i><b>9</b> Szövegskálázás: felügyelet nélküli és felügyelt megoldások</a>
<ul>
<li class="chapter" data-level="9.1" data-path="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html"><a href="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html#wordfish"><i class="fa fa-check"></i><b>9.1</b> Wordfish</a></li>
<li class="chapter" data-level="9.2" data-path="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html"><a href="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html#wordscores"><i class="fa fa-check"></i><b>9.2</b> Wordscores</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html"><i class="fa fa-check"></i><b>10</b> Szövegösszehasonlítás</a>
<ul>
<li class="chapter" data-level="10.1" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#lexikális-hasonlóság"><i class="fa fa-check"></i><b>10.1</b> Lexikális hasonlóság</a></li>
<li class="chapter" data-level="10.2" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#szemantikai-hasonlóság"><i class="fa fa-check"></i><b>10.2</b> Szemantikai hasonlóság</a></li>
<li class="chapter" data-level="10.3" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#hasonlóság-számítás-a-gyakorlatban"><i class="fa fa-check"></i><b>10.3</b> Hasonlóság számítás a gyakorlatban</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#adatbázis-importálás-és-előkészítés"><i class="fa fa-check"></i><b>10.3.1</b> Adatbázis importálás és előkészítés</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#szövegtisztítás"><i class="fa fa-check"></i><b>10.4</b> Szövegtisztítás</a></li>
<li class="chapter" data-level="10.5" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#jaccard-hasonlóság-számítás"><i class="fa fa-check"></i><b>10.5</b> Jaccard hasonlóság számítás</a></li>
<li class="chapter" data-level="10.6" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#koszinusz-hasonlóság-számítás"><i class="fa fa-check"></i><b>10.6</b> Koszinusz hasonlóság számítás</a></li>
<li class="chapter" data-level="10.7" data-path="szövegösszehasonlítás.html"><a href="szövegösszehasonlítás.html#az-eredmények-vizualizációja"><i class="fa fa-check"></i><b>10.7</b> Az eredmények vizualizációja</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html"><a href="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html"><i class="fa fa-check"></i><b>11</b> Természetes-nyelv feldolgozás (NLP) és névelemfelismerés (NER)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html"><a href="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html#a-magyarlanc-nyelvi-elemző-használata"><i class="fa fa-check"></i><b>11.1</b> A <code>magyarlanc</code> nyelvi elemző használata</a></li>
<li class="chapter" data-level="11.2" data-path="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html"><a href="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html#a-szeged-ner-elemző-használata"><i class="fa fa-check"></i><b>11.2</b> A <code>szeged ner</code> elemző használata</a></li>
<li class="chapter" data-level="11.3" data-path="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html"><a href="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html#angol-nyelvű-szövegek-névelemfelismerése"><i class="fa fa-check"></i><b>11.3</b> Angol nyelvű szövegek névelemfelismerése</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="osztályozás-és-felügyelt-tanulás.html"><a href="osztályozás-és-felügyelt-tanulás.html"><i class="fa fa-check"></i><b>12</b> Osztályozás és felügyelt tanulás</a></li>
<li class="chapter" data-level="13" data-path="fuggelek.html"><a href="fuggelek.html"><i class="fa fa-check"></i><b>13</b> Függelék</a>
<ul>
<li class="chapter" data-level="13.1" data-path="fuggelek.html"><a href="fuggelek.html#az-r-és-az-rstudio-használata"><i class="fa fa-check"></i><b>13.1</b> Az R és az RStudio használata</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="fuggelek.html"><a href="fuggelek.html#az-rstudio-kezdőfelülete"><i class="fa fa-check"></i><b>13.1.1</b> Az RStudio kezdőfelülete</a></li>
<li class="chapter" data-level="13.1.2" data-path="fuggelek.html"><a href="fuggelek.html#projektmunka"><i class="fa fa-check"></i><b>13.1.2</b> Projekt alapú munka</a></li>
<li class="chapter" data-level="13.1.3" data-path="fuggelek.html"><a href="fuggelek.html#scriptek-szerkesztése-függvények-használata"><i class="fa fa-check"></i><b>13.1.3</b> Scriptek szerkesztése, függvények használata</a></li>
<li class="chapter" data-level="13.1.4" data-path="fuggelek.html"><a href="fuggelek.html#packages"><i class="fa fa-check"></i><b>13.1.4</b> R csomagok</a></li>
<li class="chapter" data-level="13.1.5" data-path="fuggelek.html"><a href="fuggelek.html#objektumok-tárolása-értékadás"><i class="fa fa-check"></i><b>13.1.5</b> Objektumok tárolása, értékadás</a></li>
<li class="chapter" data-level="13.1.6" data-path="fuggelek.html"><a href="fuggelek.html#vektorok"><i class="fa fa-check"></i><b>13.1.6</b> Vektorok</a></li>
<li class="chapter" data-level="13.1.7" data-path="fuggelek.html"><a href="fuggelek.html#faktorok"><i class="fa fa-check"></i><b>13.1.7</b> Faktorok</a></li>
<li class="chapter" data-level="13.1.8" data-path="fuggelek.html"><a href="fuggelek.html#data-frame"><i class="fa fa-check"></i><b>13.1.8</b> Data frame</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="fuggelek.html"><a href="fuggelek.html#vizualizáció"><i class="fa fa-check"></i><b>13.2</b> Vizualizáció</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Szövegbányászat és mesterséges intelligencia R-ben</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="szövegösszehasonlítás" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Szövegösszehasonlítás</h1>
<p>A gépi szövegösszehasonlítás a mindennapi életünk számos területén megjelenő szövegbányászati technika, bár az emberek többség nincs ennek tudatában. Ezen a módszeren alapulnak a böngészők kereső mechanizmusai, vagy a kérdés-felelet (Q&amp;A) fórumok algoritmusai, melyek ellenőrzik, hogy szerepel-e már a feltenni kívánt kérdés a fórumon <span class="citation">(<a href="fuggelek.html#ref-siegTextSimilaritiesEstimate2018" role="doc-biblioref">Sieg 2018</a>)</span>. Alkalmazzák továbbá a szövegösszehasonlítást a gépi szövegfordításban és az automatikus kérdésmegválaszolási feladatok esetén is <span class="citation">(<a href="fuggelek.html#ref-wangMeasurementTextSimilarity2020" role="doc-biblioref">Wang and Dong 2020</a>)</span>, de akár automatizált esszé értékelésre vagy, plágiumellenőrzésre is hasznosítható az eljárás <span class="citation">(<a href="fuggelek.html#ref-barReflectiveViewText2011" role="doc-biblioref">Bar, Zesch, and Gurevych 2011</a>)</span>.</p>
<p>A szövegösszehasonlítás hétköznapi életben előforduló rejtett alkalmazásain túl a társadalomtudományok művelői is számos esetben hasznosítják az eljárást. A politikatudomány területén többek között használhatjuk arra, hogy eldöntsük, mennyire különböznek egymástól a benyújtott törvényjavaslatok és az elfogadott törvények szövegei, ezzel fontos információhoz jutva arról, hogy milyen szerepe van a parlamenti vitának a végleges törvények kialakításában. Egy másik példa a szakpolitikai prioritásokban és alapelvekben végbemenő változások elemzése, melyet pl. szakpolitikai javaslatok, vagy ilyen témájú viták leiratainak elemzésével is megtehetünk.</p>
<p>A könyv korábbi fejezeteiben bemutatott eljárások között sok olyat találunk, melyek alkalmasak arra, hogy a szövegek hasonlóságából valamilyen információt nyerjünk. Ugyanakkor vannak módszerek, melyek segítségével számszerűsíthetjük a szövegek közötti különbségeket, eza fejezet ezekről nyújt egy rövid áttekintést. Mindenek előtt azonban azt kell tisztáznunk, hogy miként értelmezzük a hasonlóságot. A hasonlóságelemzéseket jellemzően két nagy kategóriába szoktuk sorolni a mérni kívánt hasonlóság típusa szerint. Ez alapján beszélhetünk lexikális (formai) és szemantikai hasonlóságról.</p>
<div id="lexikális-hasonlóság" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Lexikális hasonlóság</h2>
<p>A lexikális hasonlóság a gépi szövegfeldolgozás egy egyszerűbb megközelítése, amikor nem várjuk el az elemzésünktől, hogy a „értse” a szöveget, csupán a formai hasonlóságot figyeljük. A megközelítés előnye, hogy számítási szempontból jelentősen egyszerűbb, mint a szemantikai hasonlóságra irányuló elemzések, hátránya azonban, hogy az egyszerűség könnyen tévútra vihet szofisztikáltabb elemzések esetén, így pl. a lexikális hasonlóság szempontjából az alábbi két példamondat azonosnak tekinthető, hiszen formailag (kifejezések szintjén) megegyeznek.</p>
<ol style="list-style-type: decimal">
<li><p><em>„A boszorkány megsüti Jancsit és Juliskát”</em></p></li>
<li><p><em>„Jancsi és Juliska megsüti a boszorkányt”</em></p></li>
</ol>
<p>Két dokumentum közötti lexikális hasonlóságot a szöveg számos szintjén mérhetjük: karakterláncok (sztringek), szóalakok (tokenek), n-grammok (n egységből álló karakterláncok), szózsákok (bag of words) között, de akár a dokumentum nagyobb egységei, így szövegrészletek és dokumentumok között is. Bevett megközelítés továbbá a szókészlet összehasonlítása, melyet lexikális és szemantikai hasonlóság feltárására egyaránt használhatunk.</p>
<p>A hasonlóság számítására számos metrika létezik (lásd: <span class="citation"><a href="fuggelek.html#ref-wangMeasurementTextSimilarity2020" role="doc-biblioref">Wang and Dong</a> (<a href="fuggelek.html#ref-wangMeasurementTextSimilarity2020" role="doc-biblioref">2020</a>)</span>). Ezek jelentős része valamilyen távolságszámításon alapul, mint pl. a koszinusz vagy manhattan távolságon alapuló szöveghasonlóság. A koszinusz távolság a két szövegvektor (azaz szöveg vektorizált formája) által bezárt szögben határozza meg a dokumentumok távolságát <span class="citation">(<a href="fuggelek.html#ref-wangMeasurementTextSimilarity2020" role="doc-biblioref">Wang and Dong 2020</a>)</span>, míg a manhattan távolság a horizontális és vertikális távolságok összegeként számítja azt. <span class="citation">(<a href="fuggelek.html#ref-laddUnderstandingUsingCommon2020" role="doc-biblioref">Ladd 2020</a>)</span>. Széles körben alkalmazott dokumentumhasonlósági metrika továbbá a Jaccard hasonlóság, melynek számítása egy egyszerű eljáráson alapul: a két dokumentumban egyező szavak számát elosztja a két dokumentumban szereplő szavak számának uniójának (vagyis az két dokumentum szavainak számának összegével, melyből kivonja az egyező szavak számának összegét). A jaccard hasonlóság tehát azt képes megmutatni, hogy a két dokumentum teljes szószámához képest mekkora az azonos kifejezések aránya.</p>
<p><span class="math display">\[\begin{align*}

Jaccard(doc_{1}, doc_{2}) = \frac{doc_{1}\,\cap \, doc_{2}}{doc1 \, \cup \, doc2} = \frac{doc_{1} \, \cap \, doc_{2}}{doc_{1} + doc_{2} - doc_{1} \, \cap  \, doc_{2} }

\end{align*}\]</span></p>
<p><span class="citation">(<a href="fuggelek.html#ref-wangMeasurementTextSimilarity2020" role="doc-biblioref">Wang and Dong 2020, 6</a>.)</span></p>
</div>
<div id="szemantikai-hasonlóság" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Szemantikai hasonlóság</h2>
<p>A szemantikai hasonlóság a lexikai hasonlósággal szemben egy komplexebb számítást, melynek során az algoritmus a szavak tartalmát is képes a elemezni tenni. Így például formai szempontból hiába nem azonos az alábbi két példamondat, a szemantikai hasonlóságvizsgálatnak észlelnie kell a tartalmi azonosságot.</p>
<ol style="list-style-type: decimal">
<li><p><em>A diákok jegyzetelnek amíg a professzor előadást tart.</em></p></li>
<li><p><em>A nebulók írnak, amikor az oktató beszél.</em></p></li>
</ol>
<p>A jelentésbeli hasonlóság kimutatására számos megközelítés létezik. Többek között alkalmazható a témamodellezés (topicmodellezés) – melyet a Felügyelet nélküli tanulás: Topik modellezés magyar törvényszövegeken című fejezetben tárgyalunk bővebben <strong>KERESZTHIVATKOZÁS A TM FEJEZETRE</strong>– ezen belül pedig az LDA látens dirillecht allokáció (<em>Latent Dirillecht Allocation</em>,) valamint az LSA (látens érzelem elemzés (<em>Latent Sentiment Analysis</em>) is nagyszerű lehetőséget kínálnak arra, hogy az egyes dokumentumainkat tartalmi hasonlóságok alapján csoportosítsuk.</p>
<p>Az LSA-nél és LDA-nél azonban egy fokkal komplexebb megközelítés a szóbeágyazás, melyet a Szóbeágyazások című fejezetben mutatunk be <strong>KERESZTHIVATKOZÁS</strong>. Ez a módszertan a témamodellezéshez képest a szöveg mélyebb szemantikai tartalmait is képes feltárni, hiszen a beágyazásnak köszönhetően képes formailag különböző, de jelentésükben azonos kifejezések azonosságát megmutatni. A jelentésbeli hasonlóság megállapítható a beágyazás során létrehozott vektorreprezentációkból (emlékezzünk: a hasonló vektorreprezentáció hasonló szemantikai tartalomra utal). Kimutathatjuk a szemantikai közelséget például a király – férfi – lovag kifejezések között, de olyan mesterségesen létrehozott jelentésbeli azonosságokat is feltárhatunk, mint az irányítószámok és az általuk jelölt városnevek kapcsolata. Abban az esetben, ha a szóbeágyazást kimondottan a szöveghasonlóság megállapítására szeretnénk használni, a Word Mover’s Distance (WMD) metrikát érdemes használni, mely a vektortérben elhelyezkedő szóvektorok közötti távolság által számszerűsíti a szövegek hasonlóságát<span class="citation">(<a href="#ref-kusnerWordEmbeddingsDocument2015setwd" role="doc-biblioref"><strong>kusnerWordEmbeddingsDocument2015setwd?</strong></a>)</span>.</p>
</div>
<div id="hasonlóság-számítás-a-gyakorlatban" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> Hasonlóság számítás a gyakorlatban</h2>
<div id="adatbázis-importálás-és-előkészítés" class="section level3" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Adatbázis importálás és előkészítés</h3>
<p>A fejezet második felében a lexikai hasonlóságvizsgálatra, ezen belül a Jaccard hasonlóság és a Koszinusz hasonlóság számítására mutatunk be egy-egy példát a törvényjavaslatok és az elfogadott törvények szövegeinek összehasonlításával. Az alábbiakban bemuatatott elemzés a <strong>Viscosity Revisited: The Power of Legislatures in New and Old Democracies - A Comparative Text Reuse Analysis (under publication)</strong> című cikkből meríti elemzési főkuszát. Az eredeti cikk által megvalósított elemzést a svájci korpusz elemzése nélkül, a magyar korpusz egy részhalmazán replikáljuk az alábbiakban. A kutatási kérdés arra irányul, hogy mennyiben változik meg a törvényjavaslatok szövege a parlamenti vita folyamán, amíg a javaslat elfogadásra kerül. Az elemzés során a különböző kormányzati ciklusok közötti eltérésekre világítunk rá.
Az elemzés megkezdése előtt a már ismert módon betöltjük a szükséges csomagokat: <code>readr</code>, <code>stringr</code>, <code>dplyr</code>, <code>quanteda</code>, <code>readtext</code>, <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="szövegösszehasonlítás.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb161-2"><a href="szövegösszehasonlítás.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb161-3"><a href="szövegösszehasonlítás.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb161-4"><a href="szövegösszehasonlítás.html#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb161-5"><a href="szövegösszehasonlítás.html#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readtext)</span>
<span id="cb161-6"><a href="szövegösszehasonlítás.html#cb161-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>Ezt követően betöltjük azokat az adatbázisokat, amelyeken a szövegösszehasonlítást fogjuk végezni: az elfogadott törvények szövegét tartalmazó korpuszt, a törvényjavaslatok szövegét tartalmazó korpuszt, valamint az ezek összekapcsolását segítő adatbázist, melyben az összetartozó törvényjavaslatok és törvények azonosítóját (id-ját) tároltuk el. Ahogy behívjuk a három CSV-t, érdemes rögtön lekérni az oszlopneveket <code>colnames()</code> és a táblázat dimenzióit <code>dim()</code>, hogy lássuk milyen adatok állnak a rendelkezésünkre, és mekkorák a táblákkal fogunk dolgozni. A <code>dim()</code> függvény első értéke a sorok száma a második pedig az oszlopok száma lesz az adott táblázatban.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="szövegösszehasonlítás.html#cb162-1" aria-hidden="true" tabindex="-1"></a>torvenyek <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/torveny_korpusz.csv&quot;</span>)</span>
<span id="cb162-2"><a href="szövegösszehasonlítás.html#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(torvenyek)</span>
<span id="cb162-3"><a href="szövegösszehasonlítás.html#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(torvenyek)</span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="szövegösszehasonlítás.html#cb163-1" aria-hidden="true" tabindex="-1"></a>tv_javaslatok <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/tv_javaslat_korpusz.csv&quot;</span>)</span>
<span id="cb163-2"><a href="szövegösszehasonlítás.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tv_javaslatok)</span>
<span id="cb163-3"><a href="szövegösszehasonlítás.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tv_javaslatok)</span></code></pre></div>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="szövegösszehasonlítás.html#cb164-1" aria-hidden="true" tabindex="-1"></a>parok <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/parok.csv&quot;</span>)</span>
<span id="cb164-2"><a href="szövegösszehasonlítás.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(parok)</span>
<span id="cb164-3"><a href="szövegösszehasonlítás.html#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(parok)</span></code></pre></div>
<p>A beimportált adatbázisok megfigyeléseinek száma egységesen 600. Ez a több mint háromezer megfigyelést tartalmazó eredeti korpusz egy részhalmaza, mely gyorsabb és egyszerűbb elemzést tesz lehetővé. Az oszlopnevek lekérésével láthatjuk, hogy a törvény korpuszban van néhány metaadat, amelyet az elemzés során felhasználhatunk, ezek a kormányzati ciklusra, törvény elfogadásának évére, valamint a benyújtó kormányzati vagy ellenzéki pártállására vonatkoznak. Ezen kívül rendelkezésre állnak a törvényeket és törvényjavaslatokat azonosító kódok (<code>tv_id</code> és <code>tvjav_id</code>) melyek segítségével majd tudjuk párosítani az összetartozó törvényjavaslatok és törvények szövegeit. Ezt a <code>left_join()</code> függvénnyel teszünk meg. Elsőként a törvényeket tartalmazó adatbázishoz kapcsoljuk hozzá a törvény–törvényjavaslat párokat tartalmazó adatbázist a törvények azonosítója (<code>tv_id</code>) alapján. A <code>colnames()</code> függvény használatával ellenőrizhetjük, hogy sikeres volt-e a művelet, és az új táblában szerepelnek-e a kívánt oszlopok.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="szövegösszehasonlítás.html#cb165-1" aria-hidden="true" tabindex="-1"></a>tv_tvjavid_osszekapcs <span class="ot">&lt;-</span> <span class="fu">left_join</span>(torvenyek, parok, <span class="at">by =</span> <span class="st">&quot;tv_id&quot;</span>)</span>
<span id="cb165-2"><a href="szövegösszehasonlítás.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tv_tvjavid_osszekapcs)</span>
<span id="cb165-3"><a href="szövegösszehasonlítás.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tv_tvjavid_osszekapcs)</span></code></pre></div>
<p>Második lépésben a törvényjavaslatokat tartalmazó adatbázist rendeljük hozzá az előzőekben már összekapcsolt két adatbázishoz.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="szövegösszehasonlítás.html#cb166-1" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tv_tvjavid_osszekapcs, tv_javaslatok, <span class="at">by =</span> <span class="st">&quot;tvjav_id&quot;</span>)</span>
<span id="cb166-2"><a href="szövegösszehasonlítás.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tv_tvjav_minta)</span>
<span id="cb166-3"><a href="szövegösszehasonlítás.html#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(tv_tvjav_minta)</span></code></pre></div>
<p>Ha jól végeztük a dolgunkat az adatbázisok összekapcsolása során, az eljárás végére 7 oszlopunk és 600 sorunk van, vagyis az újonnan létrehozott adatbázisba bekerült az összes változó (oszlop). A korpuszaink egy adattáblában való kezelése azért hasznos, mert így nem kell párhuzamosan elvágezni az azonos műveleteket a két korpusz, a törvények és a törvényjavaslatok tisztításához, hanem párhuzamosan tudunk dolgozni a kettővel. Kicsit közelebbről megvizsgálva az adatbázist azt láthatjuk, hogy minden adatbázisunkban szereplő kormányzati ciklusra 100 megfigyelés áll rendelkezésünkre <code>tv_tvjav_minta %&gt;% count(korm_ciklus)</code>. Hasonlóan ellenőrizhetjük az egyes évekre eső megfigyelések számát: <code>tv_tvjav_minta %&gt;% count(év)</code>.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="szövegösszehasonlítás.html#cb167-1" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta <span class="sc">%&gt;%</span> </span>
<span id="cb167-2"><a href="szövegösszehasonlítás.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(korm_ciklus)</span></code></pre></div>
</div>
</div>
<div id="szövegtisztítás" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Szövegtisztítás</h2>
<p>Mivel az elemzés során két különböző korpusszal dolgozunk – két oszlopnyi szöveggel – egyszerűbb, ha a szövegtisztítás lépéseiből létrehozunk egy külön függvényt, amely magában foglalja a művelet egyes lépéseit, és lehetővé teszi, hogy ne kelljen minden szövegtisztítási lépést külön definiálni az egyes korpuszok esetén.</p>
<p>A függvény neve jelen esetben <code>szovegtisztitas</code> lesz, és a már ismert lépéseket foglalja magában: kontrol karakterek szóközzé alakítása, központozás és a számok eltávolítása. Kisbetűsítés, ismétlődő sztringek és a sztringek előtt található szóközök eltávolítása. Továbbá a <code>str_remove_all()</code> függvénnyel eltávolítjuk azokat az írásjeleket, amelyek előfordulnak a szövegben, de számunkra nem hasznosak.</p>
<p>A függvény definiálását az alábbi szintaxissal tehetjük meg.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="szövegösszehasonlítás.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fuggveny &lt;- function(bemenet) {</span></span>
<span id="cb168-2"><a href="szövegösszehasonlítás.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     elvegzendo_lepesek</span></span>
<span id="cb168-3"><a href="szövegösszehasonlítás.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     return(kimenet)</span></span>
<span id="cb168-4"><a href="szövegösszehasonlítás.html#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  }</span></span></code></pre></div>
<p>A <em>bemenet</em> helyen azt jelöljük, hogy milyen objektumon fogjuk végrehajtani a műveleteket, a kimenetet pedig a <code>return()</code> függvénnyel definiáljuk, ez lesz a függvényünk úgynevezett visszatérési értéke, vagyis a <em>elvégzendő lepesek</em> szerint átalakított objektum. A szövegtisztító függvény bemeneti és kimeneti értéke is text lesz, mivel ebbe a változóba mentettük az elvégzendő változtatásokat.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="szövegösszehasonlítás.html#cb169-1" aria-hidden="true" tabindex="-1"></a>szovegtisztitas <span class="ot">&lt;-</span> <span class="cf">function</span>(text) {</span>
<span id="cb169-2"><a href="szövegösszehasonlítás.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_replace</span>(text, <span class="st">&quot;[:cntrl:]&quot;</span>, <span class="st">&quot; &quot;</span>)</span>
<span id="cb169-3"><a href="szövegösszehasonlítás.html#cb169-3" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;[:punct:]&quot;</span>)</span>
<span id="cb169-4"><a href="szövegösszehasonlítás.html#cb169-4" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;[:digit:]&quot;</span>)</span>
<span id="cb169-5"><a href="szövegösszehasonlítás.html#cb169-5" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_to_lower</span>(text)</span>
<span id="cb169-6"><a href="szövegösszehasonlítás.html#cb169-6" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_trim</span>(text)</span>
<span id="cb169-7"><a href="szövegösszehasonlítás.html#cb169-7" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_squish</span>(text)</span>
<span id="cb169-8"><a href="szövegösszehasonlítás.html#cb169-8" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;’&quot;</span>)</span>
<span id="cb169-9"><a href="szövegösszehasonlítás.html#cb169-9" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;…&quot;</span>)</span>
<span id="cb169-10"><a href="szövegösszehasonlítás.html#cb169-10" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;–&quot;</span>)</span>
<span id="cb169-11"><a href="szövegösszehasonlítás.html#cb169-11" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;“&quot;</span>)</span>
<span id="cb169-12"><a href="szövegösszehasonlítás.html#cb169-12" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;”&quot;</span>)</span>
<span id="cb169-13"><a href="szövegösszehasonlítás.html#cb169-13" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;„&quot;</span>)</span>
<span id="cb169-14"><a href="szövegösszehasonlítás.html#cb169-14" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;«&quot;</span>)</span>
<span id="cb169-15"><a href="szövegösszehasonlítás.html#cb169-15" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;»&quot;</span>)</span>
<span id="cb169-16"><a href="szövegösszehasonlítás.html#cb169-16" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;§&quot;</span>)</span>
<span id="cb169-17"><a href="szövegösszehasonlítás.html#cb169-17" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;°&quot;</span>)</span>
<span id="cb169-18"><a href="szövegösszehasonlítás.html#cb169-18" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;&lt;U+25A1&gt;&quot;</span>)</span>
<span id="cb169-19"><a href="szövegösszehasonlítás.html#cb169-19" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">=</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;@&quot;</span>)</span>
<span id="cb169-20"><a href="szövegösszehasonlítás.html#cb169-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(text)</span>
<span id="cb169-21"><a href="szövegösszehasonlítás.html#cb169-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Miután létrehoztuk a szövegtisztításra alkalmas függvényünket, az adatbázis két oszlopára fogjuk alkalmazni: a törvények szövegét és törvényjavaslatok szövegét tartalmazó oszlopra, melyben a <code>mapply()</code> függvény lesz a segítségünkre. A <code>mapply()</code> függvényen belül megadjuk az adatbázist, és ennek vonatkozó részeire való hivatkozást <code>tv_tvjav_minta[ ,c("torveny_szoveg","tvjav_szoveg")]</code>. Az alkalmazni kívánt függvényt a <code>FUN</code> argumanetumaként adhatjuk meg – értelemszerűen, ez esetünkben az előzőekben létrehozott <code>szovegtisztitas</code> függvény lesz. Végezetül pedig a fügvényünk által megtisztított új oszlopokkal felülírjuk az előző adatbázisunk vonatkozó oszlopait, vagyis a <code>torveny_szoveg</code> és a <code>tvjav_szoveg</code> oszlopokat: <code>tv_tvjav_minta[, c("torveny_szoveg","tvjav_szoveg")] &lt;- &gt;&gt;újonnan létrehozott oszlopok&lt;&lt;</code>.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="szövegösszehasonlítás.html#cb170-1" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta[, <span class="fu">c</span>(<span class="st">&quot;torveny_szoveg&quot;</span>,<span class="st">&quot;tvjav_szoveg&quot;</span>)] <span class="ot">&lt;-</span> <span class="fu">mapply</span>(tv_tvjav_minta[ ,<span class="fu">c</span>(<span class="st">&quot;torveny_szoveg&quot;</span>,<span class="st">&quot;tvjav_szoveg&quot;</span>)], <span class="at">FUN =</span> szovegtisztitas)</span></code></pre></div>
<p>A szövegtisztítás következő lépése a stopszavak meghatározása és kiszűrése a szövegből. Itt a <code>quanteda</code> csomagban elérhető magyar nyelvű stopszavakat, valamint a 9. fejezetben meghatározott speciális jogi stopszavak listáját használjuk.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="szövegösszehasonlítás.html#cb171-1" aria-hidden="true" tabindex="-1"></a>legal_stopwords <span class="ot">&lt;-</span> <span class="fu">readtext</span>(<span class="st">&quot;data/legal_stopwords.csv&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF8&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb171-2"><a href="szövegösszehasonlítás.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(text)</span></code></pre></div>
<p>A stopszavak beimportálását követően korpusszá alakítjuk a szövegeinket és tokenizáljuk azokat. Ezt már külön-külön végezzük el a törvények és törvényjavaslatok szövegeire, azonos lépésekben haladva.A létrehozott objektumokat itt is ellenőrizhetjük pl. a <code>summary(torvenyek_coprus)</code> paranccsal, vagy a <code>torvenyek_tokens[1:3]</code> paranccsal, mely az első 3 dokumentum tokenjeit fogja megmutatni.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="szövegösszehasonlítás.html#cb172-1" aria-hidden="true" tabindex="-1"></a>torvenyek_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(tv_tvjav_minta<span class="sc">$</span>torveny_szoveg)</span>
<span id="cb172-2"><a href="szövegösszehasonlítás.html#cb172-2" aria-hidden="true" tabindex="-1"></a>tv_javaslatok_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(tv_tvjav_minta<span class="sc">$</span>tvjav_szoveg)</span></code></pre></div>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="szövegösszehasonlítás.html#cb173-1" aria-hidden="true" tabindex="-1"></a>torvenyek_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(torvenyek_corpus) <span class="sc">%&gt;%</span></span>
<span id="cb173-2"><a href="szövegösszehasonlítás.html#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">&quot;hungarian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb173-3"><a href="szövegösszehasonlítás.html#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(legal_stopwords) <span class="sc">%&gt;%</span></span>
<span id="cb173-4"><a href="szövegösszehasonlítás.html#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_wordstem</span>(<span class="at">language =</span> <span class="st">&quot;hun&quot;</span>)</span>
<span id="cb173-5"><a href="szövegösszehasonlítás.html#cb173-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-6"><a href="szövegösszehasonlítás.html#cb173-6" aria-hidden="true" tabindex="-1"></a>tv_javaslatok_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(tv_javaslatok_corpus) <span class="sc">%&gt;%</span></span>
<span id="cb173-7"><a href="szövegösszehasonlítás.html#cb173-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="fu">stopwords</span>(<span class="st">&quot;hungarian&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb173-8"><a href="szövegösszehasonlítás.html#cb173-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(legal_stopwords) <span class="sc">%&gt;%</span></span>
<span id="cb173-9"><a href="szövegösszehasonlítás.html#cb173-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_wordstem</span>(<span class="at">language =</span> <span class="st">&quot;hun&quot;</span>)</span></code></pre></div>
<p>A szövegek tokenizálásával és a stopszavak eltávolításával a szövegtisztítás végére értünk, így megkezdhetjük az elemzést.</p>
</div>
<div id="jaccard-hasonlóság-számítás" class="section level2" number="10.5">
<h2><span class="header-section-number">10.5</span> Jaccard hasonlóság számítás</h2>
<p>A Jaccard hasonlóság kiszámításához a <code>quanteda</code> <code>textstat_simil()</code> függvényét fogjuk alkalmazni. Mivel a <code>textstat_simil()</code> függvény dokumentum-kifejezés mátrixot vár bemenetként, elsőként alakítsuk át ennek megfelelően a korpuszainkat.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="szövegösszehasonlítás.html#cb174-1" aria-hidden="true" tabindex="-1"></a>torvenyek_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(torvenyek_tokens)</span>
<span id="cb174-2"><a href="szövegösszehasonlítás.html#cb174-2" aria-hidden="true" tabindex="-1"></a>tv_javaslatok_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(tv_javaslatok_tokens) </span></code></pre></div>
<p>Miután létrehoztuk a dokumentum-kifejezés mátrixokat, érdemes a leggyakoribb tokeneket ellenőrizni a <code>textstat_frequency()</code> függvénnyel, hogy biztosak lehssünk benne, hogy a megfelelő eredményt értük el a szövegtisztítás során. (Amennyiben nem vagyunk elégedettek, érdemes visszatérni a stopszavakhoz és újabb kifejezezéseket hozzárendelni a stopszó listához).</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="szövegösszehasonlítás.html#cb175-1" aria-hidden="true" tabindex="-1"></a>tv_toptokens <span class="ot">&lt;-</span> <span class="fu">textstat_frequency</span>(torvenyek_dfm, <span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb175-2"><a href="szövegösszehasonlítás.html#cb175-2" aria-hidden="true" tabindex="-1"></a>tv_toptokens</span></code></pre></div>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="szövegösszehasonlítás.html#cb176-1" aria-hidden="true" tabindex="-1"></a>tvjav_toptokens <span class="ot">&lt;-</span> <span class="fu">textstat_frequency</span>(tv_javaslatok_dfm, <span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb176-2"><a href="szövegösszehasonlítás.html#cb176-2" aria-hidden="true" tabindex="-1"></a>tvjav_toptokens</span></code></pre></div>
<p>A létrehozott dokumentum-kifejezés mátrixokon elvégezhetjük a dokumentumhasonlóság vizsgálatot. (A jaccard hasonlóság metrika, illetve quanteda <code>textstat_simil()</code> függvénye alkalmazható egy korpuszra is. Egy korpuszra végezve az elemzést a korpusz dokumentumai közötti hasonlóságot számítja ki a függvény, míg két korpuszra mindkét korpusz összes dokumentuma közötti hasonlóságot. Érdemes továbbá azt is megjegyezni, hogy a <code>textstat_simil()</code> <code>method</code> argumentumaként megadható számos más hasonlósági metrika is, pl. a koszinusz hasonlóság (<code>method = "cosine"</code>), melyekkel számos további érdekes számítás végezhető. Bővebben a <code>textstat_simil()</code> függény használatáról és argumentumairól a <code>quanteda</code> hivatalos honlapján olvashatunk: <a href="https://quanteda.io/reference/textstat_simil.html">textstat_simil( )</a>). A <code>textstat_simil()</code> függvény kapcsán azt is érdemes figyelembe venni, hogy mivel nem csak a dokumentum párokra, hanem az összes bemenetként megadott dokumentumra külön kiszámítja a jaccard indexet a korpusz(ok) méretének növelésével a számítás kapacítás- és időigényessége exponenciálisan növekszik. Két 600 dokumentumból álló korpusz esetén kb. 4-5 perc a számítási idő, míg 360 dokumentum estén csupán 1-2 perc.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="szövegösszehasonlítás.html#cb177-1" aria-hidden="true" tabindex="-1"></a>jaccard_hasonlosag <span class="ot">=</span> <span class="fu">textstat_simil</span>(torvenyek_dfm, tv_javaslatok_dfm, <span class="at">method =</span> <span class="st">&quot;jaccard&quot;</span>) </span></code></pre></div>
<p>Mivel az eredménymátrixunk meglehetősen terjedelmes, nem érdemes az egészet egyben megtekinteni, egyszerűbb az első néhány dokumentum közötti hasonlóságra szűrni, melyet a szögletes zárójelben való indexeléssel tudunk megtenni. Az <code>[1:5, 1:5]</code> kifejezéssel specifikálhatjuk az elsőtől az ötödikig a sorokat és az oszlopkat.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="szövegösszehasonlítás.html#cb178-1" aria-hidden="true" tabindex="-1"></a>jaccard_hasonlosag[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<p>A mátrix fődiagonáljában jelennek meg az összetartozó törvényekre és törvényszövegek vonatkozó értékek, minden más érték nem összetartozó törvény és törvényjavaslat szövegek hasonlóságára vonatkozik, vagyis a vizsgálatunk szempontjából irreleváns. Ahhoz, hogy kinyerjük a számunkra értékes adatokat a jaccard hasonlóság változót mátrixszá kell alakítani. (Ránézésre úgy tűnhet, hogy már most is mátrix, de valójában ez egy speciális <code>S4</code> típusú objektum, melyben a mátrixon kívül más típusú információk is elvannak mentve. Az egyes objektumok típusát mindig ellenőrizhetjük a <code>typeof()</code> függvénnyel: <code>typeof(jaccard_hasonlosag)</code>). A mátrixszá alakításban az <code>as.matrix()</code> függvény lesz a segítségünkre, melynek egyúttal a diagonálját is kinyerhetjük a <code>diag()</code> függvénnyel. Ha jól dolgoztunk a létrehozott <code>jaccard_diag</code> első öt eleme (<code>jaccard_diag[1:5]</code>) megegyezik a fent megjelenített 5x5-ös mátrix fődiagonáljában elhelyezkedő értékekkel, hossza pedig (<code>length()</code>) a mátrix bármelyik dimenziójával.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="szövegösszehasonlítás.html#cb179-1" aria-hidden="true" tabindex="-1"></a>jaccard_diag <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="fu">as.matrix</span>(jaccard_hasonlosag))</span>
<span id="cb179-2"><a href="szövegösszehasonlítás.html#cb179-2" aria-hidden="true" tabindex="-1"></a>jaccard_diag[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<p>Miután siekrült kinyerni az egyes törvny–törvényjavaslat párokra vonatkozó jaccard értéket, érdemes a számításainakt hozzárendelni az eredeti adattáblánkhoz, hogy a meglévő metaadatok fényében tudjuk kiértékelni az egyes dokumentumok közötti hasonlóságot. A hozzárendeléshez egyszerűen definiálunk egy új oszlopot a meglévő adatbázisban <code>tv_tvjav_minta$jaccard_index</code>, melyhez hozzárendeljük a diagonálból kinyert értékeket.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="szövegösszehasonlítás.html#cb180-1" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>jaccard_index <span class="ot">&lt;-</span> jaccard_diag</span></code></pre></div>
<p>Érdemes megnézni a végeredményt, ellenőrizni a jaccard hasonlóság legmagasabb és legalacsonyabb értékeit. A <code>top_n()</code> függvény használatával ki tudjuk válogatni a legmagasabb és legalacsonyabb értékeket. A <code>top_n()</code> függvény első argumentuma a változó lesz, ami alapján a legalacsonyabb és legmagasabb értékeket keressük, a második argumentum pedig azt specifikálja, hogy a legmagasabb és legalacsonyabb értékek közül hányat szeretnénk látni. Az <code>n=5</code> értékkel a legmagasabb, az <code>n=-5</code> értékkel a legalacsonyabb 5 jaccard indexszel rendelkező sort tudjuk kiszűrni. Emellett érdemes arra is odafigyelni, hogy a szövegeket tartalmazó oszlopainkat ne próbáljuk meg kiíratni, hiszen ez jelentősen lelassítja az RStudio működését és csökkenti a kiírt eredmények áttekinthetőségét.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="szövegösszehasonlítás.html#cb181-1" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta[, <span class="fu">c</span>(<span class="st">&quot;tv_id&quot;</span>, <span class="st">&quot;korm_ciklus&quot;</span>, <span class="st">&quot;tvjav_id&quot;</span>, <span class="st">&quot;jaccard_index&quot;</span>)] <span class="sc">%&gt;%</span></span>
<span id="cb181-2"><a href="szövegösszehasonlítás.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(jaccard_index, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="szövegösszehasonlítás.html#cb182-1" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta[, <span class="fu">c</span>(<span class="st">&quot;tv_id&quot;</span>, <span class="st">&quot;korm_ciklus&quot;</span>, <span class="st">&quot;tvjav_id&quot;</span>, <span class="st">&quot;jaccard_index&quot;</span>)] <span class="sc">%&gt;%</span> </span>
<span id="cb182-2"><a href="szövegösszehasonlítás.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(jaccard_index, <span class="at">n=</span><span class="sc">-</span><span class="dv">5</span>) </span></code></pre></div>
<p>Láthatjuk, hogy az 5 öt leghasonlóbb törvény–törvényjavaslat pár esetén 0.98 felett van a jaccard hasonlág értéke, míg a leginkább különböző 5-nél 0.03 alatt.</p>
</div>
<div id="koszinusz-hasonlóság-számítás" class="section level2" number="10.6">
<h2><span class="header-section-number">10.6</span> Koszinusz hasonlóság számítás</h2>
<p>A Jaccard hasonlóság számítás után a koszinusz távolság számítása már nem jelent nagy kihívást, hiszen a <code>textat_simil()</code> függvénnyel ezt is kiszámíthatjuk, csupán a metrika paramétereként (<code>method =</code>) megadhatjuk a kosziniszt is. Ahogy az előbbiekben, itt is a dokumentum-kifejezés mátrixokat adjuk meg bemeneti értékként.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="szövegösszehasonlítás.html#cb183-1" aria-hidden="true" tabindex="-1"></a>koszinusz_hasonlosag <span class="ot">&lt;-</span> <span class="fu">textstat_simil</span>(torvenyek_dfm, tv_javaslatok_dfm, <span class="at">method =</span> <span class="st">&quot;cosine&quot;</span>) </span></code></pre></div>
<p>Érdmes itt is megtekinteni a mátrix első néhány sorába és oszlopába eső értékeket.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="szövegösszehasonlítás.html#cb184-1" aria-hidden="true" tabindex="-1"></a>koszinusz_hasonlosag[<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<p>Ebben az esetben is a mátrix diagonálja van csak szükségünk, melyet a fent ismeretett módon nyerünk ki a mátrixból.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="szövegösszehasonlítás.html#cb185-1" aria-hidden="true" tabindex="-1"></a>koszinusz_diag <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="fu">as.matrix</span>(koszinusz_hasonlosag))</span>
<span id="cb185-2"><a href="szövegösszehasonlítás.html#cb185-2" aria-hidden="true" tabindex="-1"></a>koszinusz_diag[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<p>Végezetül pedig a koszinusz értékeket is hozzárendeljük egy</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="szövegösszehasonlítás.html#cb186-1" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>koszinusz <span class="ot">&lt;-</span> koszinusz_diag</span></code></pre></div>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="szövegösszehasonlítás.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tv_tvjav_minta)</span></code></pre></div>
</div>
<div id="az-eredmények-vizualizációja" class="section level2" number="10.7">
<h2><span class="header-section-number">10.7</span> Az eredmények vizualizációja</h2>
<p>A hasonlóság metrikák vizulizációjára gyakran alkalmazott megoldás a hőtérkép ( <strong>heatmap</strong>) mellyel korrelációs mátrixokat ábrázolhatunk. Ebben az esetben a mátrix értékeit egy színskálán vizualizáljuk, ahol a világosabb színek a magasabb, a sötétebb színek az alacsonyabb értékeket jelölik. A jaccard hasonlóság számítás és a koszinusz hasonlóság számításakor kapott mátrixok esetén is ábrázoljhatjuk az értékeinket ilyen módon. Mivel azonban mindkét mátrix 600x600-as, nem érdemes a teljes mátrixot megjelentíeni, mert ilyen nagy mennyiségű adatnál már értelmezhetetlenné válik az ábra, így csak az utlsó 100 elemet, vagyis a 2014-2018-as időszakra vonatkozó értékeket jelenítjük meg. Ezt a <code>kosziunsz_hasonlóság</code> nevű objektumunk feldarabolásával tesszük meg, szögletes zárójelben jelölve, hogy a mátrix mely sorait, és mely oszlopait szeretnénk használni: ‘koszinusz_hasonlosag[501:600, 501:600].’ Mivel az R még nem mátrixként értelmezi ezt az objektumot (lásd: <code>typeof()</code>) át kell alakítanunk mátrixszá az <code>as.matrix()</code> függvény segítségével. Ezt követően a <code>matrix_raster_plot()</code> függvényt használjuk az ábra vizualizációjához.<a href="#fn41" class="footnote-ref" id="fnref41"><sup>41</sup></a></p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="szövegösszehasonlítás.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nandb)</span>
<span id="cb188-2"><a href="szövegösszehasonlítás.html#cb188-2" aria-hidden="true" tabindex="-1"></a>heat_koszinusz <span class="ot">&lt;-</span> <span class="fu">matrix_raster_plot</span>(<span class="fu">as.matrix</span>(koszinusz_hasonlosag[<span class="dv">501</span><span class="sc">:</span><span class="dv">600</span>, <span class="dv">501</span><span class="sc">:</span><span class="dv">600</span>]), <span class="at">scale_name =</span> <span class="st">&quot;Koszinusz hasonlóság&quot;</span>)</span>
<span id="cb188-3"><a href="szövegösszehasonlítás.html#cb188-3" aria-hidden="true" tabindex="-1"></a>heat_koszinusz</span></code></pre></div>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="szövegösszehasonlítás.html#cb189-1" aria-hidden="true" tabindex="-1"></a>heat_jaccard <span class="ot">&lt;-</span> <span class="fu">matrix_raster_plot</span>(<span class="fu">as.matrix</span>(jaccard_hasonlosag[<span class="dv">501</span><span class="sc">:</span><span class="dv">600</span>, <span class="dv">501</span><span class="sc">:</span><span class="dv">600</span>]), <span class="at">scale_name =</span> <span class="st">&quot;Jaccard hasonlóság&quot;</span>)</span>
<span id="cb189-2"><a href="szövegösszehasonlítás.html#cb189-2" aria-hidden="true" tabindex="-1"></a>heat_jaccard</span></code></pre></div>
<p>A két plot összehasonlításanál láthatjuk, hogy a koszinusz hasonlóság általában magasabb hasonlósági értékeket mutat. A mátrix főátlójában kiugró világos csík azt mutatja meg, hogy a legnagyobb hasonlóság az összetartozó törvény-törvényjavaslat szövegek között mutatkozik meg, eddig tehát az adataink az elvárásaink szerinti képet mutatják – amennyiben a világos csíkot nem látnánk, az egyértelmű visszajelzés volna arról, hogy elrontottunk valamit a szövegelőkészítés eddigi lépéseinek folyán, vagy a várakozásásaink voltak teljesen rosszak.</p>
<p>A koszinusz és a jaccard hasonlóság értékét ábrázolhatjuk közös pontdiagrammon a <code>geom_jitter()</code> segítségével.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="szövegösszehasonlítás.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tv_tvjav_minta, <span class="fu">aes</span>(<span class="at">x=</span>év))<span class="sc">+</span>                  </span>
<span id="cb190-2"><a href="szövegösszehasonlítás.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">y =</span> jaccard_index), <span class="at">color =</span> <span class="st">&quot;navyblue&quot;</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb190-3"><a href="szövegösszehasonlítás.html#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">y =</span> koszinusz), <span class="at">color =</span> <span class="st">&quot;deeppink3&quot;</span>, <span class="at">size =</span> <span class="fl">1.2</span>)<span class="sc">+</span></span>
<span id="cb190-4"><a href="szövegösszehasonlítás.html#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ylab</span>(<span class="st">&#39;Jaccard és koszinusz hasonóság&#39;</span>)<span class="sc">+</span></span>
<span id="cb190-5"><a href="szövegösszehasonlítás.html#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="fu">xlab</span>(<span class="st">&#39;Év&#39;</span>)</span>
<span id="cb190-6"><a href="szövegösszehasonlítás.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="do">### Ide még kellene egy legend.</span></span></code></pre></div>
<p>A hasonlósági értékek évenkétni alakulásának megértése érdekében érdemes átlagot számolni a mutatókra. Ezt a <code>group_by()</code> és a <code>summarize()</code> függvények együttes alkalmazásával tehetjük meg. Megadjuk, hogy évenkénti bontásban szeretnénk a számításainkat elvégezni <code>group_by(év)</code>, és azt, hogy átlag számítást szeretnénk végezni <code>mean()</code>.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="szövegösszehasonlítás.html#cb191-1" aria-hidden="true" tabindex="-1"></a>evenkenti_atlag <span class="ot">&lt;-</span> tv_tvjav_minta <span class="sc">%&gt;%</span> </span>
<span id="cb191-2"><a href="szövegösszehasonlítás.html#cb191-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(év) <span class="sc">%&gt;%</span> </span>
<span id="cb191-3"><a href="szövegösszehasonlítás.html#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(á<span class="at">tl_koszinusz =</span> <span class="fu">mean</span>(koszinusz), á<span class="at">tl_jacc =</span> <span class="fu">mean</span>(jaccard_index))</span>
<span id="cb191-4"><a href="szövegösszehasonlítás.html#cb191-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-5"><a href="szövegösszehasonlítás.html#cb191-5" aria-hidden="true" tabindex="-1"></a>evenkenti_atlag</span></code></pre></div>
<p>Az évenkénti átlagot tartalmazó adattáblánkara ezt követően vonal diagramot illesztünk.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="szövegösszehasonlítás.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>evenkenti_atlag, <span class="fu">aes</span>(<span class="at">x=</span>év)) <span class="sc">+</span></span>
<span id="cb192-2"><a href="szövegösszehasonlítás.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>átl_koszinusz), <span class="at">color =</span> <span class="st">&#39;navyblue&#39;</span>)<span class="sc">+</span></span>
<span id="cb192-3"><a href="szövegösszehasonlítás.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>átl_jacc), <span class="at">color=</span> <span class="st">&#39;deeppink3&#39;</span>)<span class="sc">+</span></span>
<span id="cb192-4"><a href="szövegösszehasonlítás.html#cb192-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&#39;Jaccard és koszinusz hasonóság évenkénti átlagérték&#39;</span>)<span class="sc">+</span></span>
<span id="cb192-5"><a href="szövegösszehasonlítás.html#cb192-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&#39;Év&#39;</span>)</span>
<span id="cb192-6"><a href="szövegösszehasonlítás.html#cb192-6" aria-hidden="true" tabindex="-1"></a><span class="do">### Ide még kellene egy legend. </span></span></code></pre></div>
<p>Ahhoz, hogy valamivel pontosabb képet kapjunk a jaccard index értékének alakulásáról, érdemes vizualizálni őket a ggplot segítségével. Elsőként évenkénti bontásban ábrázoljuk a jaccard index értékének alakulását. A színek kormányzati ciklusok szerinti bontását a <code>color = komr_ciklus</code> változóval tudjuk megadni. A tengelyfeliratokat az <code>xlab()</code> és <code>ylab()</code> paramétereiként adjuk meg, a jelmagyarázat címét pedig a <code>labs()</code> értékeként. A <code>ggplot</code> magától csak néhány értéket rendelne az x tengelyhez feliratként, amit átállíthatunk a <code>scale_x_continuous()</code> fügvénnyel és ezek <code>breaks</code> és <code>labels</code> paramétereivel – előbbi az adatfeliratok helyét, utóbbi az adatfeliratok szövegét specifikálja. Értékeiket megadhatjuk manuálisan is egy karaktervektorként, még egyszerűbben pedig úgy specifikálhatjuk, hogy az év oszlopunk egyedi értékeire hivatkozunk: <code>unique(tv_tvjav_minta$év)</code>. Végezetül pedig a beállítjuk, hogy az x tengelyen legyenek elforgatva a tengelyfeliratok, hogy ne takarják ki egymást, a forgatás mértékét itt szögben adhatjuk meg: <code>angle = 45</code>.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="szövegösszehasonlítás.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> tv_tvjav_minta, <span class="fu">aes</span>((év), jaccard_index, <span class="at">color =</span> korm_ciklus)) <span class="sc">+</span></span>
<span id="cb193-2"><a href="szövegösszehasonlítás.html#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb193-3"><a href="szövegösszehasonlítás.html#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Év&quot;</span>) <span class="sc">+</span></span>
<span id="cb193-4"><a href="szövegösszehasonlítás.html#cb193-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Jaccard hasonlóság&quot;</span>)<span class="sc">+</span></span>
<span id="cb193-5"><a href="szövegösszehasonlítás.html#cb193-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Kormányzati ciklus&quot;</span>)<span class="sc">+</span></span>
<span id="cb193-6"><a href="szövegösszehasonlítás.html#cb193-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">c</span>(<span class="fu">unique</span>(tv_tvjav_minta<span class="sc">$</span>év)), <span class="at">labels=</span><span class="fu">c</span>(<span class="fu">unique</span>(tv_tvjav_minta<span class="sc">$</span>év)))<span class="sc">+</span></span>
<span id="cb193-7"><a href="szövegösszehasonlítás.html#cb193-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>))</span></code></pre></div>
<p>A pontdiagram látványos, de esetünkben kevés érdemi információ derül ki róla. A második ábránkon boxplotokkal fogjuk ábrázolni a jaccard hasonlóság alakulását.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="szövegösszehasonlítás.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tv_tvjav_minta, <span class="fu">aes</span>(<span class="fu">factor</span>(év), jaccard_index, <span class="at">color =</span> korm_ciklus)) <span class="sc">+</span></span>
<span id="cb194-2"><a href="szövegösszehasonlítás.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb194-3"><a href="szövegösszehasonlítás.html#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Év&quot;</span>) <span class="sc">+</span></span>
<span id="cb194-4"><a href="szövegösszehasonlítás.html#cb194-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Jaccard hasonlóság&quot;</span>)<span class="sc">+</span> </span>
<span id="cb194-5"><a href="szövegösszehasonlítás.html#cb194-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Kormányzati ciklus&quot;</span>)<span class="sc">+</span></span>
<span id="cb194-6"><a href="szövegösszehasonlítás.html#cb194-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>))</span></code></pre></div>
<p>Az ábrán szembetűnő a 2003-as év kiugróan alacsony értéke, azonban itt érdemes figyelembe venni - ami a pontdiagramról is leolvasható - hogy 2003-ra csupán 2 adatpont áll rendelkezésre. A legalacsonyabb jaccard hasonlóság talán az 1994-1998-as időszakra jellemző, míg a 2014-2018-as iőszakra szembetűnően magas jaccard értékeket látunk az első ábrázolt ciklushoz képest. Összességében nehéz trendet látni az ábrán, de érdemes azt is megjegyezni, hogy a negatív irányba kiugró adatpontok a 2014-2018-as ciklusban jelentősen nagyobb arányban tűnnek fel, mint a korábbi kormányzati ciklusok alatt.</p>
<p>Végezetül pedig ábrázolhatjuk a jaccard hasonlóságot a benyújtó személye alapján is a <code>korm_ell</code> változónk alapján. A változók értékei a következőek <a href="https://docs.google.com/document/d/11AwjQiRNbMifBaBnbgo2MpWR00-03VEjb63FgPUy6VA/edit#heading=h.cx672ghhctgs">CAP kódkönyve alapján</a> (p.4):</p>
<p><em>0 - Ellenzéki benyújtó</em></p>
<p><em>1 - Kormánypárti benyújtó</em></p>
<p><em>2 - Kormánypárti és ellenzéki benyújtó közösen</em></p>
<p><em>3 - Benyújtók legalább két ellenzéki pártból</em></p>
<p><em>4 - Benyújtók legalább két ellenzéki pártból</em></p>
<p><em>5 - Nem releváns - a benyújtó a kabinet tagja</em></p>
<p><em>6 - Nem releváns - a benyújtó a bizottság tagja volt</em></p>
<p><em>7 - Nem releváns - a benyújtó sem a parlamentnek, sem a kabinetnek, sem a bizottságnak nem tagja</em></p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="szövegösszehasonlítás.html#cb195-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-2"><a href="szövegösszehasonlítás.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="do">######### EZT TÖRÖLNI!!!!!!!!!!!! - ha működik a tidybb megoldás#############</span></span>
<span id="cb195-3"><a href="szövegösszehasonlítás.html#cb195-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-4"><a href="szövegösszehasonlítás.html#cb195-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Mivel nincs túl sok adatpontunk, és ezek többsége a 900-as értéket vesz fel (lásd: `tv_tvjav_minta %&gt;% count(korm_ell)`), érdemes összevonni a 0-ás és a 3-as változót, valamint az 1-es és a 4-es változót egy-egy értékbe, hogy jobban elemezhetőek legyenek az eredményeink. Ehhez a `korm_ell` változó értékei alapján definiálunk egy új `korm_ell2` változót. Az új változó definiálását és az értékadásokat a már ismert szögletes zárójellel, az adatbázis bizonyos részeire hivatkozva fogjuk megtenni. Először csupa `NA` értékkel létrehozzuk azt az oszlopot, amibe szeretetnénk az új értékeket elmenteni. A `tv_tvjav_minta$korm_ell2 &lt;- 0` parancs a `korm_ell2` változó minden értékéhez 0-t rendelne. Ahhoz, hogy csak a `korm_ell` oszlopban 0-ás, vagy 3-as értéket felvevő sorokban adjunk 0-ás értéket, a következő módon szűrjük az adatbázist: `[tv_tvjav_minta$korm_ell == 0 | tv_tvjav_minta$korm_ell == 3]`. A `|` jel a &quot;vagy&quot;-ot jelöl. Ugyanezzel a módszerrel a többi értéket is hozzárendeljük a `korm_ell2` változóhoz.</span></span>
<span id="cb195-5"><a href="szövegösszehasonlítás.html#cb195-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-6"><a href="szövegösszehasonlítás.html#cb195-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-7"><a href="szövegösszehasonlítás.html#cb195-7" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>korm_ell2 <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb195-8"><a href="szövegösszehasonlítás.html#cb195-8" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>korm_ell2[tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb195-9"><a href="szövegösszehasonlítás.html#cb195-9" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>korm_ell2[tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb195-10"><a href="szövegösszehasonlítás.html#cb195-10" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>korm_ell2[tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb195-11"><a href="szövegösszehasonlítás.html#cb195-11" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>korm_ell2[tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">900</span>] <span class="ot">&lt;-</span> <span class="dv">900</span></span>
<span id="cb195-12"><a href="szövegösszehasonlítás.html#cb195-12" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>korm_ell2[tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">901</span>] <span class="ot">&lt;-</span> <span class="dv">901</span></span>
<span id="cb195-13"><a href="szövegösszehasonlítás.html#cb195-13" aria-hidden="true" tabindex="-1"></a>tv_tvjav_minta<span class="sc">$</span>korm_ell2[tv_tvjav_minta<span class="sc">$</span>korm_ell <span class="sc">==</span> <span class="dv">902</span>] <span class="ot">&lt;-</span> <span class="dv">902</span></span></code></pre></div>
<p>Mivel nincs túl sok adatpontunk, és ezek többsége a 900-as adatpont alá esik (lásd: <code>tv_tvjav_minta %&gt;% count(korm_ell)</code>), érdemes összevonni a 0-ás és a 3-as változót, valamint az 1-es és a 4-es változót egy-egy értékbe, hogy jobban elemezhetőek legyenek az eredményeink. Ehhez a <code>korm_ell</code> változó értékei alapján definiálunk egy új <code>korm_ell2</code> változót. Az új változó definiálását és az értékadásokat a <code>dplyr</code> <code>case_when()</code> függvényével fogjuk megtenni. A függvényen belül a baloldalra kerül, hogy milyen értékek alapján szeretnénk az új értéket meghatározni a tilde (~) után pedig az, hogy mi legyen az újonnan létrehozott oszlop értéke. Tehát a <code>case_when()</code>-en belül lévő első sor azt fejezi ki, hogy amennyiben a <code>korm_ell</code> egyenlő 0-val, vagy (<code>|</code>) a <code>korm_ell</code> egyenlő 3-mal, legyen a korm_ell2 értéke 0.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="szövegösszehasonlítás.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tv_tvjav_minta &lt;- tv_tvjav_minta %&gt;% </span></span>
<span id="cb196-2"><a href="szövegösszehasonlítás.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(korm_ell2 = case_when(korm_ell == 0 | korm_ell == 3 ~ 0, </span></span>
<span id="cb196-3"><a href="szövegösszehasonlítás.html#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="co">#                                korm_ell == 1 | korm_ell == 4 ~ 1,</span></span>
<span id="cb196-4"><a href="szövegösszehasonlítás.html#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co">#                                korm_ell == 2 ~ 2, </span></span>
<span id="cb196-5"><a href="szövegösszehasonlítás.html#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                                korm_ell == 900 ~ 900,</span></span>
<span id="cb196-6"><a href="szövegösszehasonlítás.html#cb196-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                                korm_ell == 901 ~ 901, </span></span>
<span id="cb196-7"><a href="szövegösszehasonlítás.html#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                                korm_ell == 902 ~ 902))</span></span></code></pre></div>
<p>Miután létrehoztuk az új oszlopot, létrehozhatjuk a vizualizációt is annak alapján. Itt egy speciális pontdiagramot fogunk használni <code>geom_jitter()</code>-t,ami annyiban különbözik a pontdiagramtól, hogy kicsit szórtabban ábrázolja a diszkrét értékekre (évek) eső pontokat, hogy az egy helyen sűrűsödő értékek ne takarják ki egymást.</p>
<p>A pontok színeit manuálisan is definiálhatjuk, ha szeretnénk kontrollálni, hogy melyik érték milyen színben tűnjön fel. Ezt a <code>scale_color_manual()</code> függvény hozzárendelésével tehetjük meg. Ebben az esetben a <code>breaks</code>, a <code>values</code> és a <code>labels</code> paramétereket adjuk meg. Mivel a <code>labels()</code> értékei ebben az esetben hosszabb feliratok, érdemes külön objektumba (<code>korm_ell_labels</code>) elmenteni őket, hogy az ábra kódjában már csak az objektum nevére kelljen hivatkozni, ezzel átláthatóbbá téve a kódot által. A <code>values</code> változóban definiálhatjuk a felhasználni kívánt színeket, amit akár hexadecimális RGB kódok, akár a színek nevének megadásával is megtehetünk. Emellett az R számos előre definiált palettátt is felkínál, melyek alapján automatikusan hozzárendeli a színeket az értékekhez. Bővebben a színekről: <a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/">Colors ggplot2</a>.</p>
<p>Ahhoz, hogy a színeket hozzárendelhessük az értékeinkhez a <code>korm_ell2</code> változót faktorrá, vagyis kategorikus értékeket tartalmazó változóvá kell alakítanunk: <code>color = as.factor(korm_ell2)</code>. <span style="color:red">[Itt picit bizonytalan vagyok, hogy tényleg ez okozz-e a hibát, ami miatt factorrá kell alakítani.] Az előzőekhez képest módosítjuk a jelmagyarázat poziícióját és elrendezését is. A <code>legend.position</code>-t “bottom” értékre állítva az ábra aljára helyezhetjük azt, valamint azt is megadhatjuk, hogy hány oszlopba legyenek tagolva a jelmagyarázat értékei a <code>guides(color=guide_legend(ncol=3))</code> sor segítségével. </span></p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="szövegösszehasonlítás.html#cb197-1" aria-hidden="true" tabindex="-1"></a>korm_ell_labels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Ellenzéki képviselő(k)&quot;</span>,</span>
<span id="cb197-2"><a href="szövegösszehasonlítás.html#cb197-2" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Kormánypárti képviselő(k)&quot;</span>,</span>
<span id="cb197-3"><a href="szövegösszehasonlítás.html#cb197-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Kormányzati és ellenzéki képviselők közösen&quot;</span>,</span>
<span id="cb197-4"><a href="szövegösszehasonlítás.html#cb197-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Kabinet tagja&quot;</span>, </span>
<span id="cb197-5"><a href="szövegösszehasonlítás.html#cb197-5" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Bizottság tagja&quot;</span>, </span>
<span id="cb197-6"><a href="szövegösszehasonlítás.html#cb197-6" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Egyik sem&quot;</span>)</span>
<span id="cb197-7"><a href="szövegösszehasonlítás.html#cb197-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-8"><a href="szövegösszehasonlítás.html#cb197-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tv_tvjav_minta, <span class="fu">aes</span>(év, jaccard_index, <span class="at">color =</span> <span class="fu">as.factor</span>(korm_ell2))) <span class="sc">+</span></span>
<span id="cb197-9"><a href="szövegösszehasonlítás.html#cb197-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size =</span><span class="fl">1.2</span>)<span class="sc">+</span></span>
<span id="cb197-10"><a href="szövegösszehasonlítás.html#cb197-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb197-11"><a href="szövegösszehasonlítás.html#cb197-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;900&quot;</span>, <span class="st">&quot;901&quot;</span>, <span class="st">&quot;902&quot;</span>), </span>
<span id="cb197-12"><a href="szövegösszehasonlítás.html#cb197-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;slateblue3&quot;</span>, <span class="st">&quot;deeppink3&quot;</span>, <span class="st">&quot;goldenrod2&quot;</span>, <span class="st">&quot;thistle2&quot;</span>, <span class="st">&quot;gray80&quot;</span>, <span class="st">&quot;gray80&quot;</span>), </span>
<span id="cb197-13"><a href="szövegösszehasonlítás.html#cb197-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span>  korm_ell_labels)<span class="sc">+</span></span>
<span id="cb197-14"><a href="szövegösszehasonlítás.html#cb197-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Év&quot;</span>) <span class="sc">+</span></span>
<span id="cb197-15"><a href="szövegösszehasonlítás.html#cb197-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Jaccard hasonlóság&quot;</span>)<span class="sc">+</span></span>
<span id="cb197-16"><a href="szövegösszehasonlítás.html#cb197-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">c</span>(<span class="fu">unique</span>(tv_tvjav_minta<span class="sc">$</span>év)), <span class="at">labels=</span><span class="fu">c</span>(<span class="fu">unique</span>(tv_tvjav_minta<span class="sc">$</span>év)))<span class="sc">+</span></span>
<span id="cb197-17"><a href="szövegösszehasonlítás.html#cb197-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color=</span><span class="fu">guide_legend</span>(<span class="at">ncol=</span><span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb197-18"><a href="szövegösszehasonlítás.html#cb197-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>), <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)<span class="sc">+</span></span>
<span id="cb197-19"><a href="szövegösszehasonlítás.html#cb197-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Beterjesztő&quot;</span>)</span></code></pre></div>
<p>Mivel a törvényjavaslatok túlnyomó többségét a kabinet tagjai nyújtják be, nem igazán tudunk érdemi következtetéseket levonni arra vonatkozóan, hogy az ellenzéki vagy a kormánypárti képviselők által benyújtott javaslatok módosulnak többet a vita folyamán. Amennyiben ezzel a kérdéssel alaposabban is szeretnénk foglalkozni, érdemes csak azokat a sorokat kiválasztani a hasonlóság-számításhoz, melyben a számunkra releváns megfigyelések szerepelnek. Ha azonban ezt az eljárást választjuk, mindenképpen fontos odafigyelni arra is, hogy az elemzésben használandó megfigyelések kiválogatása nehogy szelektív legyen egy nem megfigyelt változó szempontjából is, ezzel befolyásolva a kutatás eredményeit.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="41">
<li id="fn41"><p>A<code>matrix_raster_plot()</code> függvényt a nandb csomag feltelepítése után tudjuk csak használni.<a href="szövegösszehasonlítás.html#fnref41" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="szövegskálázás-felügyelet-nélküli-és-felügyelt-megoldások.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="természetes-nyelv-feldolgozás-nlp-és-névelemfelismerés-ner.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
